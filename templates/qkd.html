{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-white">Quantum Channel Monitor</h2>
    <span class="px-3 py-1 bg-green-900/50 border border-green-500/30 text-green-400 rounded-full text-xs">
        <i class="fa-solid fa-satellite-dish mr-2 animate-pulse"></i> Link Active (ANU QRNG)
    </span>
</div>

<!-- Stats Grid -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700">
        <h4 class="text-slate-400 text-xs uppercase mb-2">Last QBER</h4>
        <div class="text-3xl font-bold text-white">
            {% if simulation_log %}
                {{ "%.2f"|format(simulation_log.qber * 100) }}%
            {% else %}
                --
            {% endif %}
        </div>
        <div class="text-xs text-slate-500 mt-1">Safety Threshold: 15.00%</div>
    </div>

    <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700">
        <h4 class="text-slate-400 text-xs uppercase mb-2">Channel Status</h4>
        <div class="text-xl font-bold">
            {% if simulation_log and simulation_log.status == 'SECURE' %}
                <span class="text-green-400"><i class="fa-solid fa-lock"></i> Secure</span>
            {% elif simulation_log %}
                <span class="text-red-400"><i class="fa-solid fa-triangle-exclamation"></i> Intercepted</span>
            {% else %}
                <span class="text-slate-500">Idle</span>
            {% endif %}
        </div>
    </div>

    <div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700 overflow-hidden">
        <h4 class="text-slate-400 text-xs uppercase mb-2">Raw Key Bits (Sample)</h4>
        <div class="font-mono text-xs text-quantum-400 break-all h-12 overflow-y-auto">
            {% if simulation_log and simulation_log.raw_key_bytes %}
                {{ simulation_log.raw_key_bytes }}
            {% else %}
                Waiting for transmission...
            {% endif %}
        </div>
    </div>
</div>

<!-- Placeholder for Chart (Advanced: You can add Chart.js here later) -->
<div class="bg-slate-800/50 p-6 rounded-xl border border-slate-700 h-64 flex items-center justify-center">
    <div class="text-center text-slate-500">
        <i class="fa-solid fa-chart-line text-4xl mb-3 opacity-50"></i>
        <p>Real-time QBER Graph available during active sessions.</p>
    </div>
</div>
{% endblock %}